

az login



az acr show --name amavlarecommendation --subscription "E5-Business-AMAVLA"


az acr credential show --name amavlarecommendation --query username --subscription "E5-Business-AMAVLA"


build image locally:
docker build -t image_name .

run locally the image:
docker run -p 8080:80 image_name


login to the Container registry:
docker login amavlarecommendation.azurecr.io -u amavlarecommendation -p B/8p3GRhcc9mTPnnXuG9qGMFAj5a7CxZgntX+jUHAl+ACRD4obvS


Build the image with the version number:
docker build -t amavlarecommendation.azurecr.io/articles:article-generation-v1.0.2 .
docker build -t amavlarecommendation.azurecr.io/articles:article-enrichment-v1.0.2 .

Push the image with the version number:
docker push amavlarecommendation.azurecr.io/articles:article-generation-v1.0.2
docker push amavlarecommendation.azurecr.io/articles:article-enrichment-v1.0.2

Tag the image as the latest version:
docker tag amavlarecommendation.azurecr.io/articles:article-generation-v1.0.2 amavlarecommendation.azurecr.io/articles:article-generation-latest
docker tag amavlarecommendation.azurecr.io/articles:article-enrichment-v1.0.2 amavlarecommendation.azurecr.io/articles:article-enrichment-latest

Push the latest version to the repository articles:
docker push amavlarecommendation.azurecr.io/articles:article-generation-latest
docker push amavlarecommendation.azurecr.io/articles:article-enrichment-latest


To deploy the Cron Job
kubectl apply -f article_generation_deployment.yaml --namespace article-generation
kubectl apply -f article_enrichment_deployment.yaml --namespace article-enrichment

check the deployments inside the Kubernetes names article-generation:
kubectl get deployments --namespace article-generation


check the cronjobs inside the Kubernetes names article-generation:
kubectl get cronjobs --namespace article-generation


delete all cron jobs in the instance article-generation:
kubectl delete cronjobs --all -n article-generation











Create an image pull secret with the following kubectl command:

kubectl create secret docker-registry acr-reco-secret \
    --namespace article-generation \
    --docker-server=amavlarecommendation.azurecr.io \
    --docker-username=amavlarecommendation \
    --docker-password="B/8p3GRhcc9mTPnnXuG9qGMFAj5a7CxZgntX+jUHAl+ACRD4obvS"


kubectl create secret docker-registry acr-reco-secret --docker-server=amavlarecommendation.azurecr.io --docker-username=amavlarecommendation --docker-password="B/8p3GRhcc9mTPnnXuG9qGMFAj5a7CxZgntX+jUHAl+ACRD4obvS"
















